<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./styles.css" />
    <title>Todo App</title>
  </head>

  <body>
    <div class="todo__container">
      <h1>Todo</h1>
      <form class="todo__card todo__form">
        <input type="text" name="description" placeholder="What you would like to do?" required />
        <button class="button__primary">Create</button>
      </form>

      <ul class="todo__card todo__list">
        <li>
          <p class="todo__list__loading">ðŸ•’ Loading...</p>
        </li>
      </ul>
    </div>

    <template id="todo-list-empty">
      <li>
        <p class="todo__list__empty">No Todos Found</p>
      </li>
    </template>

    <template id="todo-list-item">
      <li>
        <div class="todo__item">
          <input type="checkbox" name="done" />
          <div class="todo__item__description">
            Lorem, ipsum dolor sit amet consectetur adipisicing elit. Impedit facere debitis quae
            odio error sunt vitae id molestias aut incidunt asperiores illum recusandae odit, esse
            velit quibusdam voluptatem aspernatur fugit?
          </div>
          <div class="todo__item__actions">
            <button class="button__primary">Edit</button>
            <button class="button__danger">Delete</button>
          </div>
        </div>
      </li>
    </template>

    <script type="module">
      async function fetchTodos() {
        try {
          const res = await fetch("/api/todos");

          if (!res.ok) {
            throw new Error("Recieve error from server");
          }

          const todos = await res.json();
          if (!Array.isArray(todos)) {
            throw new Error("Expected JSON array of todos");
          }

          insertTodosInDOM(todos);
        } catch (err) {
          console.error(err);
          alert("Failed to fetch todos");
        }
      }

      function insertTodosInDOM(todos) {}
    </script>
  </body>
</html>
